var modules=["templates","invoicer.invoice","ui.router.state"],appModule=angular.module("invoicer",modules),appConfig=function(o){o.otherwise("/")};appConfig.$inject=["$urlRouterProvider"],appModule.config(appConfig);var invoiceController=angular.module("invoice.controller",[]),InvoiceController=function(){function o(o){var e=this;this.$scope=o,this.invoice={number:"ABC001",companyInfo:{name:"We Are Wizards Ltd",companyNumber:"Company No.: 08861162",website:"www.vincent.is",address1:"Bristol & West House, Post Office Road",address2:"Bournemouth, Dorset, UK, BH1 1BL",email:"prouillet.vincent@gmail.com",vatRegistrationNumber:"VAT: 23-23-23",logo:"http://placehold.it/200x200"},clientInfo:{name:"Client Inc",address1:"10 Downing Street",address2:"SW1A 2AA, London, UK"},currency:"Â£",tax:20,date:"2014/04/01",dueDate:"2014/04/15",items:[{description:"Something invoiceable",price:75,quantity:3}],paymentTerms:"Money transfer to the account below.\nWe Are Wizards Ltd\nAccount number: 12345678\nSort code: 12-34-56"},this.showLogo=!0,o.vm=this,this._loadFromLocalStorage("companyInfo"),this._loadFromLocalStorage("paymentTerms"),this.$scope.$watch("vm.invoice.companyInfo",function(){e._saveInLocalStorage("companyInfo")},!0),this.$scope.$watch("vm.invoice.paymentTerms",function(){e._saveInLocalStorage("paymentTerms")})}return o.prototype._loadFromLocalStorage=function(o){void 0!==localStorage[o]&&(this.invoice[o]=JSON.parse(localStorage[o]))},o.prototype._saveInLocalStorage=function(o){localStorage[o]=JSON.stringify(this.invoice[o])},o.prototype.calculateSubtotal=function(){var o=0;return this.invoice.items.forEach(function(e){o+=e.quantity*e.price}),o},o.prototype.calculateTaxes=function(){return this.calculateSubtotal()*this.invoice.tax/100},o.prototype.removeItem=function(o){this.invoice.items.splice(this.invoice.items.indexOf(o),1)},o.prototype.addItem=function(){this.invoice.items.push({description:"New row",price:0,quantity:0})},o.prototype.toggleShowLogo=function(){this.showLogo=!this.showLogo},o.prototype.changeLogo=function(o){var e=this,t=new FileReader;t.onload=function(o){var t=document.getElementById("logo");t.src=o.target.result,e.invoice.companyInfo.logo=t.src,e.$scope.$apply()},t.readAsDataURL(o.files[0])},o.prototype.clearLocalStorage=function(){localStorage.removeItem("paymentTerms"),localStorage.removeItem("companyInfo"),location.reload()},o.$inject=["$scope"],o}();invoiceController.controller("InvoiceController",InvoiceController);var modules=["ui.router.state"],invoice=angular.module("invoicer.invoice",modules),invoiceConfig=function(o){o.state("invoice",{url:"/",controller:"InvoiceController",templateUrl:"invoice/default.html"})};invoiceConfig.$inject=["$stateProvider"],invoice.config(invoiceConfig);
"use strict";"undefined"==typeof Array.prototype.indexOf&&(Array.prototype.indexOf=function(e,t){if(!this)throw new TypeError;t=+t,isNaN(t)&&(t=0);var n=this.length;if(0===n||t>=n)return-1;for(0>t&&(t+=n);n>t;)if(this[t+=1]===e)return t;return-1}),function(e,t){var n,o={ghostMode:{enabled:!0,cache:{}}},i={tagNames:{css:"link",jpg:"img",jpeg:"img",png:"img",svg:"img",gif:"img",js:"script"},attrs:{link:"href",img:"src",script:"src"}},r=["background-color: black","color: white","padding: 10px","display: none","font-family: sans-serif","position: absolute","z-index: 9999","right: 0px"],c={processOptions:function(e,t,o,i){e.options=t,t.ghostMode&&this.initGhostMode(t.ghostMode,o,i),t.notify&&(n=this.createNotifyElem(r||null),this.notify("Connected to BrowserSync",n))},setOptions:function(e){o&&(o.options=e)},createNotifyElem:function(e){var t=document.createElement("DIV");t.id="notifyElem";var n=document.getElementsByTagName("HTML")[0];return n.style.position="relative",e&&(t.style.cssText=e.join(";")),document.getElementsByTagName("body")[0].appendChild(t),t},notify:function(t,o,i){return document.getElementById("notifyElem")||(n=this.createNotifyElem(r||null)),o.innerHTML=t,o.style.top=l.getScrollTop()+"px",o.style.display="block",e.setTimeout(function(){o.style.display="none"},i||1e3),o},initGhostMode:function(e,t,n){if(e.clicks&&l.initClickEvents(o,t,n.click),e.scroll&&l.initEvents(o,["scroll"],t,n),e.forms)for(var i=l.getInputs(),r=[[i.texts,"keyup","keyup"],[i.radios,"click","forceChange"],[i.radios,"change","radioChange"],[i.checkboxes,"click","forceChange"],[i.checkboxes,"change","checkboxChange"],["textarea","keyup","keyup"],["select","change","selectChange"],["form","submit","formSubmit"],["form","reset","formReset"]],c=0,s=r.length;s>c;c+=1)l.addBrowserEvents(r[c][0],r[c][1],n[r[c][2]],t)},reloadEvent:function(e,t,o){var i;if((t.url||!e.options.injectChanges)&&o.reloadBrowser(!0),t.assetFileName&&t.fileExtension){var r=this.getElems(t.fileExtension),s=this.getMatches(r.elems,t.assetFileName,r.attr);s.length&&e.options.notify&&c.notify("Injected: "+t.assetFileName,n);for(var l=0,a=s.length;a>l;l+=1)i=o.swapFile(s[l],r.attr,e)}return i},getElems:function(e){var t=this.getTagName(e),n=this.getAttr(t);return{elems:document.getElementsByTagName(t),attr:n}},getTagName:function(e){return i.tagNames[e]},getAttr:function(e){return i.attrs[e]},getMatches:function(e,t,n){for(var o=[],i=0,r=e.length;r>i;i+=1)-1!==e[i][n].indexOf(t)&&o.push(e[i]);return o}},s={reloadBrowser:function(t){t&&e.location.reload()},swapFile:function(e,t,n){var o=e[t],i=(new Date).getTime(),r="?rel="+i,c=/^[^\?]+(?=\?)/.exec(o);return c&&(o=c[0]),n&&n.options&&n.options.timestamps===!1&&(r=""),e[t]=o+r,{elem:e,timeStamp:i}}},l={getScrollPosition:function(){var t,n,o=document,i=o.documentElement,r=o.body;return void 0!==e.pageYOffset?[e.pageXOffset,e.pageYOffset]:(t=i.scrollLeft||r.scrollLeft||0,n=i.scrollTop||r.scrollTop||0,[t,n])},getScrollPercentage:function(e,t){var n=t[0]/e[0],o=t[1]/e[1];return[n,o]},getScrollSpace:function(){var e,t,n=document,o=n.documentElement,i=n.body;return e=i.scrollHeight-o.clientWidth,t=i.scrollHeight-o.clientHeight,[e,t]},getScrollTop:function(){return this.getScrollPosition()[1]},getScrollTopPercentage:function(){var e=this.getScrollSpace(),t=this.getScrollPosition();return this.getScrollPercentage(e,t)[1]},setScrollTop:function(t,n){t.enabled=!1,e.scrollTo(0,n)},simulateEvent:function(e,t){var n;document.createEvent?(n=document.createEvent("MouseEvents"),n.initEvent(t,!0,!0),e.dispatchEvent(n)):document.createEventObject&&(n=document.createEventObject(),n.cancelBubble=!0,e.fireEvent("on"+t,n))},checkCache:function(e,t){var n;return e[t]?e[t].elem:(e.called=e.called?e.called+=1:1,(n=document.getElementById(t))?(e[t]={},e[t].elem=n,n):!1)},initClickEvents:function(e,t,n){var o=document.getElementsByTagName("body")[0];this.composeElementEvent(o,t,"click",n)},initEvents:function(e,t,n,o){for(var i,r=0,c=t.length;c>r;r+=1)i=t[r],this.composeWindowEvent(n,i,o[i])},composeWindowEvent:function(t,n,o){e[t.eventListener](t.prefix+n,o,!1)},composeElementEvent:function(e,t,n,o){e[t.eventListener](t.prefix+"click",o,!1)},emitEvent:function(n,o){t&&t.emit&&(o.url=e.location.pathname,t.emit(n,o))},addBrowserEvents:function(e,t,n,o){"string"==typeof e&&(e=document.getElementsByTagName(e));for(var i=0,r=e.length;r>i;i+=1)e[i][o.eventListener](o.prefix+t,n,!1)},getInputs:function(){for(var e=document.getElementsByTagName("input"),t=[],n=[],o=[],i=["text","email","url","tel","password"],r=0,c=e.length;c>r;r+=1){for(var s=e[r].type,l=0,a=i.length;a>l;l+=1)if(s===i[l]){t.push(e[r]);break}"radio"===e[r].type&&n.push(e[r]),"checkbox"===e[r].type&&o.push(e[r])}return{texts:t,radios:n,checkboxes:o}},listeners:{scroll:function(){var e={raw:l.getScrollTop(),proportional:l.getScrollTopPercentage()},t=(new Date).getTime(),n=0;o.options&&o.options.scrollThrottle&&(n=o.options.scrollThrottle),o.ghostMode.lastScroll||(o.ghostMode.scrollTop=e[0],o.ghostMode.lastScroll=(new Date).getTime()),t>o.ghostMode.lastScroll+n&&o.ghostMode.enabled&&(o.ghostMode.lastScroll=t,l.emitEvent("scroll",{position:e})),o.ghostMode.enabled=!0},click:function(e,t){if(t||(t=o),t.ghostMode.enabled){var n=e.target||e.srcElement,i=n.tagName;if("checkbox"===n.type||"radio"===n.type)return;var r=document.getElementsByTagName(i),c=Array.prototype.indexOf.call(r,n),s={tagName:i,index:c};l.emitEvent("click",s)}else t.ghostMode.enabled=!0},keyup:function(e){var t=e.target||e.srcElement;t.id&&l.emitEvent("input:text",{id:t.id,value:t.value})},forceChange:function(){this.blur(),this.focus()},radioChange:function(e){var t=e.target||e.srcElement;l.emitEvent("input:radio",{id:t.id,value:t.value})},checkboxChange:function(e){if(o.ghostMode.enabled){var t=e.target||e.srcElement;l.emitEvent("input:checkbox",{id:t.id,checked:t.checked})}},selectChange:function(e){var t=e.target||e.srcElement;l.emitEvent("input:text",{id:t.id,value:t.value})},formSubmit:function(e){var t=e.target||e.srcElement;l.emitEvent("form:submit",{id:t.id})},formReset:function(e){var t=e.target||e.srcElement;l.emitEvent("form:reset",{id:t.id})}},utils:{eventListener:e.addEventListener?"addEventListener":"attachEvent",removeEventListener:e.removeEventListener?"removeEventListener":"detachEvent",prefix:e.addEventListener?"":"on"},getCurrentPath:function(){return e.location.pathname},canSync:function(e){return e===this.getCurrentPath()}};e.__karma__&&(e.BrowserSync=c,e.browserSyncActions=s,e.ghost=l,e.scope=o,t.on=function(){}),t.on("connection",function(e){c.processOptions(o,e,l.utils,l.listeners)}),t.on("reload",function(e){e&&c.reloadEvent(o,e,s)}),t.on("click",function(e){if(l.canSync(e.url)){var t=document.getElementsByTagName(e.tagName),n=t[e.index];o.ghostMode.enabled=!1,n&&l.simulateEvent(n,"click")}}),t.on("location",function(t){t.url&&(e.location=t.url)}),t.on("scroll",function(t){if(l.canSync(t.url))if(o.ghostMode.enabled=!1,o.options.scrollProportionally){var n=l.getScrollSpace();e.scrollTo(0,n[1]*t.position.proportional)}else e.scrollTo(0,t.position.raw)}),t.on("input:text",function(e){if(l.canSync(e.url)){o.ghostMode.enabled=!1;var t=l.checkCache(o.ghostMode.cache,e.id);t.value=e.value}}),t.on("input:radio",function(e){if(l.canSync(e.url)){o.ghostMode.enabled=!1;var t=l.checkCache(o.ghostMode.cache,e.id);t.checked=!0}}),t.on("input:checkbox",function(e){if(l.canSync(e.url)){o.ghostMode.enabled=!1;var t=l.checkCache(o.ghostMode.cache,e.id);t.checked=e.checked}}),t.on("form:submit",function(e){l.canSync(e.url)&&(o.ghostMode.enabled=!1,document.forms[e.id].submit())}),t.on("form:reset",function(e){l.canSync(e.url)&&(o.ghostMode.enabled=!1,document.forms[e.id].reset())})}(window,"undefined"==typeof ___socket___?{}:___socket___);